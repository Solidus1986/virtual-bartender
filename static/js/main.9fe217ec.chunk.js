(this["webpackJsonpchatbot-cocktail"]=this["webpackJsonpchatbot-cocktail"]||[]).push([[0],{33:function(e,t,s){},62:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),n=s(10),r=s.n(n),i=(s(33),s(6)),o=s.n(i),l=(s.p,s(12)),u=s(5),d=s(27),j=s(16),b=s(3),p="RESPONSE_USER_SUCCESS",m="RESPONSE_USER_FAIL",h="SESSION_SUCCESS",O="SESSION_FAIL",g="RESPONSE_BOT_SUCCESS",v="RESPONSE_BOT_FAIL",f="MESSAGE_SUCCESS",x="MESSAGE_FAIL",S={messagesChat:[],messages:[]},y=Object(u.combineReducers)({kwalys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0,s=t.type,a=t.payload,c=e.messagesChat,n=e.messages;switch(s){case p:return Object(b.a)(Object(b.a)({},e),{},{messagesChat:c});case m:return Object(b.a)({},e);case h:return localStorage.setItem("session",a),Object(b.a)({},e);case O:return Object(b.a)({},e);case g:return n=[].concat(Object(j.a)(n),[{message:a,type:"bot"}]),Object(b.a)(Object(b.a)({},e),{},{messages:n});case v:return Object(b.a)({},e);case f:return n=[].concat(Object(j.a)(n),[{message:a,type:"user"}]),Object(b.a)(Object(b.a)({},e),{},{messages:n});case x:default:return Object(b.a)({},e)}}}),k=s(28),N=[d.a],E=Object(u.createStore)(y,{},Object(k.composeWithDevTools)(u.applyMiddleware.apply(void 0,N))),w=s(4),C=s.n(w),R=s(7),_=s(9),M=s(1);function A(e){var t=e.dataMessages;return Object(M.jsx)("div",{className:"chat-messages",children:t.map((function(e){return Object(M.jsx)("div",{className:"mess",type:e.type,children:"media"===e.type?Object(M.jsx)("img",{className:"media",src:e.content}):Object(M.jsx)("div",{children:e.content.replace(/<(?:.|\n)*?>/gm," ")})})}))})}var I=s.p+"static/media/short.9bdb22ec.svg",U=s.p+"static/media/long.473a2d63.svg",F=s.p+"static/media/acide.7f718d8c.jpg",D=s.p+"static/media/smocky.1ac48840.jpg",L=s.p+"static/media/fruity.e5f99a7d.jpg";function B(e){var t=e.dataResponses,s=e.dataHandleSubmit;return Object(M.jsx)("div",{className:"chat-responses",children:t.map((function(e){return Object(M.jsx)(M.Fragment,{children:function(){switch(e.content){case"Short":return Object(M.jsx)("img",{className:"imgResponse",height:80,src:I,alt:e.content,onClick:s,value:e.content,name:e.tracking},e.id);case"Long":return Object(M.jsx)("img",{className:"imgResponse",height:80,src:U,alt:e.content,onClick:s,value:e.content,name:e.tracking},e.id);case"Acid":return Object(M.jsxs)("div",{className:"taste",onClick:s,children:[Object(M.jsx)("img",{className:"imgResponse",height:80,src:F,alt:e.content,value:e.content,name:e.tracking},e.id),Object(M.jsx)("p",{children:e.content})]});case"Smocky":return Object(M.jsxs)("div",{className:"taste",onClick:s,children:[Object(M.jsx)("img",{className:"imgResponse",height:80,src:D,alt:e.content,value:e.content,name:e.tracking},e.id),Object(M.jsx)("p",{children:e.content})]});case"Fruity":return Object(M.jsxs)("div",{className:"taste",onClick:s,children:[Object(M.jsx)("img",{className:"imgResponse",height:80,src:L,alt:e.content,value:e.content,name:e.tracking},e.id),Object(M.jsx)("p",{children:e.content})]});default:return Object(M.jsx)(T,{user:e,dataHandleSubmit:s})}}()})}))})}function T(e){var t=e.user,s=e.dataHandleSubmit;return Object(M.jsx)("input",{className:"bot-responses",type:"submit",onClick:s,value:t.content,name:t.tracking},t.id)}var H=Object(l.b)((function(e){return{chat:e.kwalys.messagesChat,botMessages:e.kwalys.messages,token:localStorage.session}}),{userMessage:function(e){return function(){var t=Object(R.a)(C.a.mark((function t(s){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{s({type:p,payload:e})}catch(a){s({type:m})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},botMessage:function(){return function(){var e=Object(R.a)(C.a.mark((function e(t){var s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("http://app.ivy.kwalys.com:8080/Wideagency/bots/Demo_hennessy/api/web");case 3:s=e.sent,t({type:g,payload:s.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:v});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},sendMessage:function(e){return function(){var t=Object(R.a)(C.a.mark((function t(s){var a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("http://app.ivy.kwalys.com:8080/Wideagency/bots/Demo_hennessy/api/web",e);case 3:a=t.sent,s({type:f,payload:a.data.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),s({type:x});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){e.chat;var t=e.botMessages,s=e.token,c=(e.userMessage,e.botMessage),n=e.sendMessage,r=Object(a.useState)(""),i=Object(_.a)(r,2),o=(i[0],i[1],Object(a.useRef)(null)),l=Object(a.useState)(!1),u=Object(_.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(!1),p=Object(_.a)(b,2),m=p[0],h=p[1],O=Object(a.useState)(!0),g=Object(_.a)(O,2),v=g[0],f=g[1],x=function(e){e.preventDefault();var t={session:s,tracking:e.target.name,text:e.target.value};n(t)};return console.log(t,"le chat"),Object(a.useEffect)((function(){t&&o.current&&o.current.scrollIntoView({behavior:"smooth"})}),[t]),Object(M.jsxs)("div",{className:"chatbot",children:[m?Object(M.jsxs)("div",{className:"chat",children:[Object(M.jsx)("div",{className:"chat-header",children:Object(M.jsx)("div",{className:"close",onClick:function(){f(!v),h(!m),t.splice(0,t.length),localStorage.clear(s)},children:"X"})}),Object(M.jsx)("div",{className:"historyContainer",children:Object(M.jsxs)("div",{className:"chatBotUser",children:[t.map((function(e){return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(A,{dataMessages:e.message.messages}),Object(M.jsx)(B,{dataResponses:e.message.responses,dataHandleSubmit:x})]})})),Object(M.jsx)("div",{className:"scrollbar",ref:o})]})})]}):"",v?Object(M.jsx)("div",{onClick:function(){j(!d)},children:Object(M.jsxs)("div",{className:"bartender",children:[Object(M.jsx)("div",{className:"logo-left"}),Object(M.jsx)("button",{className:"logo",onClick:function(){c(),f(!v),h(!m)}}),Object(M.jsx)("div",{className:"logo-left"}),Object(M.jsx)("div",{children:Object(M.jsx)("p",{className:"bartender-title",children:"VIRTUAL BARTENDER"})})]})}):""]})}));localStorage.session?(delete o.a.defaults.headers.common.session,o.a.defaults.headers.common.session=localStorage.session):delete o.a.defaults.headers.common.session;var P=function(){return Object(a.useEffect)((function(){localStorage.session||E.dispatch(function(){var e=Object(R.a)(C.a.mark((function e(t){var s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("http://app.ivy.kwalys.com:8080/Wideagency/bots/Demo_hennessy/api/web");case 3:s=e.sent,t({type:h,payload:s.data.session},console.log(s.data.session,"num de session")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:O});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())})),Object(M.jsx)(l.a,{store:E,children:Object(M.jsx)("div",{className:"App",children:Object(M.jsx)(H,{})})})};r.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(P,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.9fe217ec.chunk.js.map