(this["webpackJsonpchatbot-cocktail"]=this["webpackJsonpchatbot-cocktail"]||[]).push([[0],{102:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(31),r=a.n(n),i=(a(102),a(30)),o=a.n(i),l=(a.p,a(42)),d=a(27),u=a(95),j=a(3),p=a(24),b="RESPONSE_USER_SUCCESS",m="RESPONSE_USER_FAIL",O="SESSION_SUCCESS",h="SESSION_FAIL",g="RESPONSE_BOT_SUCCESS",y="RESPONSE_BOT_FAIL",v="MESSAGE_SUCCESS",f="MESSAGE_FAIL",x={messagesChat:[],messages:[]},S=Object(d.combineReducers)({kwalys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,a=t.type,s=t.payload,c=e.messagesChat,n=e.messages;switch(a){case b:return n=[].concat(Object(p.a)(n),[{selectResponse:s}]),Object(j.a)(Object(j.a)({},e),{},{messagesChat:c});case m:return Object(j.a)({},e);case O:return localStorage.setItem("session",s),Object(j.a)({},e);case h:return Object(j.a)({},e);case g:return n=[].concat(Object(p.a)(n),[{message:s,type:"bot"}]),Object(j.a)(Object(j.a)({},e),{},{messages:n});case y:return Object(j.a)({},e);case v:return n=[].concat(Object(p.a)(n),[{message:s,type:"user"}]),Object(j.a)(Object(j.a)({},e),{},{messages:n});case f:default:return Object(j.a)({},e)}}}),k=a(96),N=[u.a],C=Object(d.createStore)(S,{},Object(k.composeWithDevTools)(d.applyMiddleware.apply(void 0,N))),E=a(16),w=a(18),R=a(17),_=a.n(R),M=a(26),I=a(2);function A(e){var t=e.dataMessages,a=Object(w.useSpring)({opacity:1,from:{opacity:0},delay:250});return Object(I.jsx)("div",{className:"chat-messages",children:t.map((function(e){return Object(I.jsx)(w.animated.div,{className:"mess",type:e.type,style:a,children:"media"===e.type?Object(I.jsx)("img",{className:"media",src:e.content}):Object(I.jsx)("div",{children:e.content.replace(/<(?:.|\n)*?>/gm," ")})})}))})}var U=a(97),L=a.p+"static/media/short.9bdb22ec.svg",D=a.p+"static/media/long.473a2d63.svg",F=a.p+"static/media/acide.7f718d8c.jpg",H=a.p+"static/media/smocky.1ac48840.jpg",T=a.p+"static/media/fruity.e5f99a7d.jpg";function B(e){var t=e.dataResponses,a=e.dataHandleSubmit,s=Object(w.useSpring)({to:{transform:"translateY(10px)",opacity:1},opacity:1,from:{transform:"translateY(50px)",opacity:0},delay:500});return Object(I.jsx)("div",{className:"chat-responses",children:t.map((function(e){return Object(I.jsx)(w.animated.div,{style:s,children:function(){switch(e.content){case"Short":return Object(I.jsx)("img",{className:"glass-short",height:80,src:L,alt:e.content,onClick:a,value:e.content,name:e.tracking},e.id);case"Long":return Object(I.jsx)("img",{className:"glass-long",height:80,src:D,alt:e.content,onClick:a,value:e.content,name:e.tracking},e.id);case"Acid":return Object(I.jsxs)("div",{className:"taste",onClick:a,children:[Object(I.jsx)("img",{className:"imgResponse",height:80,src:F,alt:e.content,value:e.content,name:e.tracking},e.id),Object(I.jsx)("p",{children:e.content})]});case"Smocky":return Object(I.jsxs)("div",{className:"taste",onClick:a,children:[Object(I.jsx)("img",{className:"imgResponse",height:80,src:H,alt:e.content,value:e.content,name:e.tracking},e.id),Object(I.jsx)("p",{children:e.content})]});case"Fruity":return Object(I.jsxs)("div",{className:"taste",onClick:a,children:[Object(I.jsx)("img",{className:"imgResponse",height:80,src:T,alt:e.content,value:e.content,name:e.tracking},e.id),Object(I.jsx)("p",{children:e.content})]});case"URL_COCKTAIL:Cocktail Sidecar":return Object(I.jsx)(U.Player,{playsInline:!0,src:"hennessy-cocktails-tutorial-1440x770-05-the-artist.mp4"});default:return Object(I.jsx)(P,{user:e,dataHandleSubmit:a})}}()})}))})}function P(e){var t=e.user,a=e.dataHandleSubmit;return Object(I.jsx)("input",{className:"bot-responses",type:"submit",onClick:a,value:t.content,name:t.tracking},t.id)}var W=Object(l.b)((function(e){return{chat:e.kwalys.messagesChat,botMessages:e.kwalys.messages,token:localStorage.session}}),{userMessage:function(e){return function(){var t=Object(M.a)(_.a.mark((function t(a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:b,payload:e},console.log(e,"??"))}catch(s){a({type:m})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},botMessage:function(){return function(){var e=Object(M.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("http://app.ivy.kwalys.com:8080/Wideagency/bots/Demo_hennessy/api/web");case 3:a=e.sent,t({type:g,payload:a.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:y});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},sendMessage:function(e){return function(){var t=Object(M.a)(_.a.mark((function t(a){var s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("http://app.ivy.kwalys.com:8080/Wideagency/bots/Demo_hennessy/api/web",e);case 3:s=t.sent,a({type:v,payload:s.data.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:f});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){e.chat;var t=e.botMessages,a=e.token,c=(e.userMessage,e.botMessage),n=e.sendMessage,r=Object(s.useState)(""),i=Object(E.a)(r,2),o=(i[0],i[1],Object(s.useRef)(null)),l=Object(s.useState)(!1),d=Object(E.a)(l,2),u=d[0],j=d[1],p=Object(s.useState)(!1),b=Object(E.a)(p,2),m=b[0],O=b[1],h=Object(s.useState)(!0),g=Object(E.a)(h,2),y=g[0],v=g[1],f=Object(s.useState)([]),x=Object(E.a)(f,2),S=(x[0],x[1],function(e){e.preventDefault();var t={session:a,tracking:e.target.name,text:e.target.value};n(t)});console.log(t,"le chat"),Object(s.useEffect)((function(){t&&o.current&&o.current.scrollIntoView({behavior:"smooth"})}),[t]);var k=Object(w.useSpring)({to:{transform:m?"translateY(0%)":"translateY(100%)"},delay:10}),N=Object(w.useSpring)({opacity:1,from:{opacity:0},delay:500}),C=Object(w.useSpring)({opacity:1,from:{opacity:0},delay:500}),R=Object(w.useSpring)({opacity:1,from:{opacity:0},delay:500});return Object(I.jsxs)("div",{className:"chatbot",children:[m?Object(I.jsxs)(w.animated.div,{style:k,className:"chat",children:[Object(I.jsx)("div",{className:"chat-header",children:Object(I.jsx)("div",{className:"close",onClick:function(){v(!y),O(!m),t.splice(0,t.length),localStorage.clear(a)},children:"\xd7"})}),Object(I.jsxs)("div",{className:"historyContainer",children:[Object(I.jsxs)("div",{className:"hello",children:[Object(I.jsx)(w.animated.p,{style:N,children:"Hello !"}),Object(I.jsx)(w.animated.p,{style:C,children:"I am Hennessy"}),Object(I.jsx)(w.animated.p,{style:R,children:"virtual bartender."})]}),Object(I.jsx)("div",{className:"chatBotUser",children:t.map((function(e){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(A,{dataMessages:e.message.messages}),Object(I.jsx)(B,{dataResponses:e.message.responses,dataHandleSubmit:S}),Object(I.jsx)("div",{className:"scrollbar",ref:o})]})}))})]})]}):"",y?Object(I.jsx)("div",{onClick:function(){j(!u)},children:Object(I.jsxs)("div",{className:"bartender",children:[Object(I.jsx)("div",{className:"logo-left"}),Object(I.jsx)("button",{className:"logo",onClick:function(){c(),v(!y),O(!m)}}),Object(I.jsx)("div",{className:"logo-left"}),Object(I.jsx)("div",{children:Object(I.jsx)("p",{className:"bartender-title",children:"VIRTUAL BARTENDER"})})]})}):""]})}));localStorage.session?(delete o.a.defaults.headers.common.session,o.a.defaults.headers.common.session=localStorage.session):delete o.a.defaults.headers.common.session;var Y=function(){return Object(s.useEffect)((function(){localStorage.session||C.dispatch(function(){var e=Object(M.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("http://app.ivy.kwalys.com:8080/Wideagency/bots/Demo_hennessy/api/web");case 3:a=e.sent,t({type:O,payload:a.data.session},console.log(a.data.session,"num de session")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:h});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())})),Object(I.jsx)(l.a,{store:C,children:Object(I.jsx)("div",{className:"App",children:Object(I.jsx)(W,{})})})};r.a.render(Object(I.jsx)(c.a.StrictMode,{children:Object(I.jsx)(Y,{})}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.60d3dce7.chunk.js.map