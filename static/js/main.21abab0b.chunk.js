(this["webpackJsonpchatbot-cocktail"]=this["webpackJsonpchatbot-cocktail"]||[]).push([[0],{33:function(e,t,s){},62:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),n=s(10),r=s.n(n),o=(s(33),s(6)),i=s.n(o),l=s(12),u=s(5),b=s(27),j=s(16),p=s(3),d="RESPONSE_USER_SUCCESS",O="RESPONSE_USER_FAIL",h="SESSION_SUCCESS",m="SESSION_FAIL",g="RESPONSE_BOT_SUCCESS",S="RESPONSE_BOT_FAIL",f="MESSAGE_SUCCESS",v="MESSAGE_FAIL",y={messagesChat:[],messages:[]},x=Object(u.combineReducers)({kwalys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,s=t.type,a=t.payload,c=e.messagesChat,n=e.messages;e.session;switch(s){case d:return Object(p.a)(Object(p.a)({},e),{},{messagesChat:c});case O:return Object(p.a)({},e);case h:return localStorage.setItem("session",a),Object(p.a)({},e);case m:return Object(p.a)({},e);case g:return n=[].concat(Object(j.a)(n),[{message:a,type:"bot"}]),Object(p.a)(Object(p.a)({},e),{},{messages:n});case S:return Object(p.a)({},e);case f:return n=[].concat(Object(j.a)(n),[{message:a,type:"user"}]),Object(p.a)(Object(p.a)({},e),{},{messages:n});case v:default:return Object(p.a)({},e)}}}),E=s(28),N=[b.a],k=Object(u.createStore)(x,{},Object(E.composeWithDevTools)(u.applyMiddleware.apply(void 0,N))),w=s(4),C=s.n(w),_=s(7),M=s(9),I=s(1),R=Object(l.b)((function(e){return{chat:e.kwalys.messagesChat,botMessages:e.kwalys.messages,token:localStorage.session}}),{userMessage:function(e){return function(){var t=Object(_.a)(C.a.mark((function t(s){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{s({type:d,payload:e})}catch(a){s({type:O})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},botMessage:function(){return function(){var e=Object(_.a)(C.a.mark((function e(t){var s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("http://app.ivy.kwalys.com:8080/Wideagency/bots/BOT_HENNESSY/api/web");case 3:s=e.sent,t({type:g,payload:s.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:S});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},sendMessage:function(e){return function(){var t=Object(_.a)(C.a.mark((function t(s){var a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=4,i.a.post("http://app.ivy.kwalys.com:8080/Wideagency/bots/BOT_HENNESSY/api/web",e);case 4:a=t.sent,s({type:f,payload:a.data.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),s({type:v});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.chat,s=e.botMessages,c=e.token,n=(e.userMessage,e.botMessage),r=e.sendMessage,o=Object(a.useState)(""),i=Object(M.a)(o,2),l=(i[0],i[1],Object(a.useRef)(null)),u=Object(a.useState)(!1),b=Object(M.a)(u,2),j=b[0],p=b[1],d=Object(a.useState)(!1),O=Object(M.a)(d,2),h=O[0],m=O[1],g=Object(a.useState)(!0),S=Object(M.a)(g,2),f=S[0],v=S[1],y=function(e){e.preventDefault();var t={session:c,tracking:e.target.name,text:e.target.value};r(t)};return console.log(t),console.log(s),Object(a.useEffect)((function(){s&&l.current&&l.current.scrollIntoView({behavior:"smooth"})}),[s]),Object(I.jsxs)("div",{className:"chat",children:[h?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"chat-header",children:Object(I.jsx)("div",{className:"close",onClick:function(){v(!f),m(!h),s.splice(0,s.length),localStorage.clear()},children:"X"})}),Object(I.jsx)("div",{className:"historyContainer",children:Object(I.jsxs)("div",{className:"chatBotUser",children:[s.map((function(e){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"chat-messages",children:e.message.messages.map((function(e){return Object(I.jsx)("div",{className:"mess",type:e.type,children:"slideshow"===e.type?Object(I.jsx)("img",{src:e.content}):Object(I.jsx)("p",{children:e.content})})}))}),Object(I.jsx)("div",{className:"chat-responses",children:e.message.responses.map((function(e){return Object(I.jsx)("input",{className:"bot-responses",type:"submit",onClick:y,value:e.content,name:e.tracking},e.id)}))})]})})),Object(I.jsx)("div",{className:"scrollbar",ref:l})]})})]}):"",f?Object(I.jsxs)("div",{onClick:function(){p(!j)},children:[Object(I.jsxs)("div",{className:"bartender",children:[Object(I.jsx)("button",{className:"logo"}),Object(I.jsx)("div",{children:j?Object(I.jsx)("div",{className:"go",onClick:function(){n(),v(!f),m(!h)},children:"^"}):Object(I.jsx)("p",{className:"bartender-title",children:"VIRTUAL BARTENDER"})})]}),Object(I.jsx)("div",{children:j?Object(I.jsxs)("p",{className:"bartender-message",children:["Hi!",Object(I.jsx)("br",{}),"I am Hennessy virtual bartender.",Object(I.jsx)("br",{}),"Let me guide you to find your perfect cocktail match!"]}):""})]}):""]})}));localStorage.session?i.a.defaults.headers.common.session=localStorage.session:delete i.a.defaults.headers.common.session;var A=function(){return Object(a.useEffect)((function(){localStorage.session||(k.dispatch(function(){var e=Object(_.a)(C.a.mark((function e(t){var s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("http://app.ivy.kwalys.com:8080/Wideagency/bots/BOT_HENNESSY/api/web");case 3:s=e.sent,t({type:h,payload:s.data.session}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:m});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),console.log(localStorage.session,"session"))})),Object(I.jsx)(l.a,{store:k,children:Object(I.jsx)("div",{className:"App",children:Object(I.jsx)(R,{})})})};r.a.render(Object(I.jsx)(c.a.StrictMode,{children:Object(I.jsx)(A,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.21abab0b.chunk.js.map